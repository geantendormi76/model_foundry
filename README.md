# zhzAI - "å°è„‘è®¡åˆ’" (Project Cerebellum) å¾®æ¨¡å‹é“¸é€ å‚

<p align="center">
  <a href="https://github.com/zhzAI/model_foundry/blob/main/LICENSE"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
  <a href="#"><img src="https://img.shields.io/badge/Python-3.9+-blue.svg" alt="Python Version"></a>
  <a href="#"><img src="https://img.shields.io/badge/Framework-PyTorch_&_Scikit--learn-orange.svg" alt="Framework"></a>
  <a href="#"><img src="https://img.shields.io/badge/Deployment-ONNX_&_Protobuf-green.svg" alt="Deployment"></a>
</p>

<p align="center">
  <strong>å‘Šåˆ«å¤§æ¨¡å‹çš„â€œæ¦‚ç‡æ€§â€çƒ¦æ¼ï¼Œä¸ºæ‚¨çš„AIåº”ç”¨ï¼Œäº²æ‰‹é“¸é€ 100%å¯é ã€æè‡´é«˜æ•ˆçš„â€œå¾®æ¨¡å‹å¤§è„‘â€ï¼</strong>
</p>

---

`model_foundry` æ˜¯ä¸€ä¸ªç‹¬ç‰¹çš„â€œè“å›¾é©±åŠ¨â€å¾®æ¨¡å‹é“¸é€ å‚ã€‚å®ƒæä¾›äº†ä¸€å¥—å®Œæ•´çš„ã€ä»Pythonè®­ç»ƒåˆ°ä»»ä½•è¯­è¨€ï¼ˆå¦‚Rustã€C++ï¼‰éƒ¨ç½²çš„å·¥ä¸šçº§å…¨è‡ªåŠ¨è§£å†³æ–¹æ¡ˆï¼Œå¹¶å®Œç¾è§£å†³äº†`scikit-learn`å¤æ‚é¢„å¤„ç†å™¨è·¨è¯­è¨€éƒ¨ç½²æ—¶æœ€æ£˜æ‰‹çš„ä¸€è‡´æ€§éš¾é¢˜ã€‚

## æ ¸å¿ƒç†å¿µï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨LLMï¼Ÿ

è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ã€‚åœ¨èƒ½å¤Ÿè°ƒç”¨å¼ºå¤§LLMï¼ˆæ— è®ºæ˜¯é€šè¿‡APIè¿˜æ˜¯æœ¬åœ°éƒ¨ç½²ï¼‰çš„æ—¶ä»£ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜è¦â€œå¤šæ­¤ä¸€ä¸¾â€åœ°é“¸é€ å¾®æ¨¡å‹ï¼Ÿ

ç­”æ¡ˆæ˜¯ï¼š**å› ä¸ºä¸€ä¸ªçœŸæ­£å¯é ã€é«˜æ•ˆã€å¯ä¿¡èµ–çš„AIäº§å“ï¼Œéœ€è¦çš„è¿œä¸æ­¢æ˜¯å¼ºå¤§çš„è¯­è¨€èƒ½åŠ›ã€‚**

ç›´æ¥å°†æ‰€æœ‰ä»»åŠ¡éƒ½äº¤ç»™ä¸€ä¸ªå•ä¸€çš„ã€åºå¤§çš„LLMï¼Œå°±åƒè®©ä¸€ä½å¤§å­¦æ•™æˆå»åŒæ—¶æ‹…ä»»å…¬å¸çš„CEOã€å‰å°ã€ä¿å®‰å’Œé€Ÿè®°å‘˜ã€‚ä»–æˆ–è®¸éƒ½èƒ½åšï¼Œä½†ä»£ä»·æ˜¯é«˜æ˜‚çš„ã€ä½æ•ˆçš„ï¼Œè€Œä¸”åœ¨å…³é”®æ—¶åˆ»æ˜¯ä¸å¯é çš„ã€‚

æˆ‘ä»¬å‘ç°ï¼Œå•ä¸€LLMé©±åŠ¨çš„ç³»ç»Ÿåœ¨ç°å®ä¸–ç•Œä¸­ä¼šé¢ä¸´ä¸‰å¤§â€œå¤©èŠ±æ¿â€ï¼š

1.  **ç»æµå­¦å¤©èŠ±æ¿ (Economics)**
    *   **APIæˆæœ¬:** æ¯ä¸€æ¬¡æ— å…³ç´§è¦çš„æ„å›¾åˆ¤æ–­ï¼ˆä¾‹å¦‚ï¼Œç”¨æˆ·è¾“å…¥çš„æ˜¯é—®é¢˜è¿˜æ˜¯é™ˆè¿°ï¼Ÿï¼‰ï¼Œéƒ½åœ¨ç‡ƒçƒ§çœŸé‡‘ç™½é“¶ã€‚å¯¹äºé«˜æµé‡åº”ç”¨ï¼Œè¿™ç¬”å¼€é”€ä¼šè¿…é€Ÿå¤±æ§ã€‚
    *   **ç¡¬ä»¶æˆæœ¬:** åœ¨æœ¬åœ°è¿è¡ŒLLMéœ€è¦æ˜‚è´µçš„GPUå’Œå·¨å¤§çš„å†…å­˜ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®©AIè¿è¡Œåœ¨æ™®é€šç¬”è®°æœ¬ç”µè„‘ç”šè‡³åµŒå…¥å¼è®¾å¤‡ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªç¡¬æ€§çº¦æŸã€‚

2.  **ç‰©ç†å­¦å¤©èŠ±æ¿ (Physics)**
    *   **å»¶è¿Ÿ:** å³ä¾¿æ˜¯æœ€å¿«çš„LLMï¼Œå…¶â€œæ€è€ƒâ€æ—¶é—´ä¹Ÿæ˜¯æŒ‰ç§’è®¡ç®—çš„ã€‚ç”¨æˆ·æ— æ³•å¿å—æ¯ä¸€æ¬¡ç®€å•çš„äº¤äº’ï¼ˆå¦‚ç¡®è®¤â€œæ˜¯/å¦â€ï¼‰éƒ½éœ€è¦ç­‰å¾…å±å¹•ä¸Šçš„å…‰æ ‡é—ªçƒæ•°ç§’ã€‚**æ¯«ç§’çº§çš„å“åº”é€Ÿåº¦**æ˜¯æ„å»ºæµç•…ç”¨æˆ·ä½“éªŒçš„ç‰©ç†åŸºçŸ³ã€‚
    *   **ç¦»çº¿èƒ½åŠ›:** ä¾èµ–äº‘ç«¯APIçš„æ¨¡å‹ï¼Œåœ¨æ–­ç½‘æˆ–ä¿¡å·ä¸ä½³çš„ç¯å¢ƒï¼ˆå¦‚é£æœºã€åœ°ä¸‹å®¤ã€æ— äººé©¾é©¶æ±½è½¦ç»è¿‡çš„éš§é“ï¼‰ä¸­ä¼šå®Œå…¨â€œå¤±èƒ½â€ã€‚

3.  **å“²å­¦å¤©èŠ±æ¿ (Philosophy)**
    *   **å¯é æ€§ä¸ç¡®å®šæ€§:** LLMæœ¬è´¨ä¸Šæ˜¯æ¦‚ç‡æ€§çš„ã€‚ä½ æ— æ³•100%ä¿è¯å®ƒåœ¨å¤„ç†â€œåˆ é™¤æˆ‘çš„é¡¹ç›®â€è¿™æ¡æŒ‡ä»¤æ—¶ï¼Œä¸ä¼šå› ä¸ºä¸€æ¬¡â€œéšæœºçš„å¥‡æ€å¦™æƒ³â€è€Œé”™è¯¯åœ°ç†è§£æˆâ€œæœç´¢æˆ‘çš„é¡¹ç›®â€ã€‚å¯¹äºéœ€è¦é«˜ç¡®å®šæ€§çš„ä»»åŠ¡ï¼ˆå¦‚æ“ä½œæ•°æ®åº“ã€æ§åˆ¶ç¡¬ä»¶ï¼‰ï¼Œè¿™ç§â€œä¸å¯é¢„æµ‹æ€§â€æ˜¯è‡´å‘½çš„ã€‚
    *   **æ•°æ®éšç§:** å¯¹äºå¤„ç†ä¸ªäººæˆ–ä¼ä¸šæ•æ„Ÿæ•°æ®çš„åº”ç”¨ï¼Œå°†æ¯ä¸€æ¡è¾“å…¥éƒ½å‘é€ç»™ç¬¬ä¸‰æ–¹APIï¼Œæ˜¯ä¸å¯æ¥å—çš„ã€‚

**â€œå°è„‘è®¡åˆ’â€æ­£æ˜¯æˆ‘ä»¬ä¸ºäº†çªç ´è¿™ä¸‰å¤§å¤©èŠ±æ¿ï¼Œæå‡ºçš„å·¥ç¨‹åŒ–è§£å†³æ–¹æ¡ˆã€‚**

æˆ‘ä»¬é‡‡ç”¨**æ··åˆæ™ºèƒ½ (Hybrid Intelligence)** æ¶æ„ï¼Œæ„å»ºä¸€ä¸ªåˆ†å·¥æ˜ç¡®ã€ååŒä½œæˆ˜çš„â€œæ•°å­—å¤§è„‘â€ï¼š

1.  **ä»£ç è§„åˆ™ (åå°„å¼§ / Brainstem):**
    *   **èŒè´£**: å¤„ç†é«˜é£é™©ã€ç¡®å®šæ€§æŒ‡ä»¤ï¼ˆå¦‚`åˆ é™¤`, `ä¿®æ”¹`ï¼‰ã€‚
    *   **ä¼˜åŠ¿**: **é›¶æˆæœ¬ã€é›¶å»¶è¿Ÿã€100%å¯é **ã€‚è¿™æ˜¯ç³»ç»Ÿä¸å¯åŠ¨æ‘‡çš„â€œå®‰å…¨ä¿é™©ä¸â€ã€‚

2.  **å¾®æ¨¡å‹ (å°è„‘ / Cerebellum):**
    *   **èŒè´£**: ä½¿ç”¨æœ¬é“¸é€ å‚äº§å‡ºçš„ã€KBçº§çš„ä¸“ç”¨æ¨¡å‹ï¼Œå¤„ç†æµ·é‡çš„ã€é«˜é¢‘çš„ã€æ¨¡å¼åŒ–çš„è¯†åˆ«ä»»åŠ¡ï¼ˆå¦‚æ„å›¾åˆ†ç±»ã€å®ä½“è¯†åˆ«ï¼‰ã€‚
    *   **ä¼˜åŠ¿**:
        *   **å¿«å¦‚é—ªç”µ**: å“åº”é€Ÿåº¦æ˜¯**æ¯«ç§’çº§**çš„ï¼Œæ¯”LLMå¿«æ•°ç™¾å€ã€‚
        *   **æè‡´é«˜æ•ˆ**: æ¨¡å‹å¤§å°ä»…**å‡ ååˆ°å‡ ç™¾KB**ï¼Œå‡ ä¹ä¸å ç”¨ä»»ä½•å†…å­˜å’Œè®¡ç®—èµ„æºã€‚
        *   **é«˜åº¦å¯é **: åœ¨å…¶ä¸“ç²¾çš„ã€æœ‰è¾¹ç•Œçš„ä»»åŠ¡ä¸Šï¼Œå‡†ç¡®ç‡å¯è½»æ¾è¾¾åˆ°**99%ä»¥ä¸Š**ï¼Œè¿œè¶…é€šç”¨LLMåœ¨è¯¥ç±»ä»»åŠ¡ä¸Šçš„è¡¨ç°ã€‚
        *   **å®Œå…¨ç¦»çº¿**: 100%åœ¨æœ¬åœ°è¿è¡Œï¼Œæ— ç½‘ç»œä¾èµ–ï¼Œä¿éšœæ•°æ®éšç§ã€‚

3.  **LLM (å¤§è„‘çš®å±‚ / Cerebral Cortex):**
    *   **èŒè´£**: åªåœ¨çœŸæ­£éœ€è¦**æ·±åº¦ç†è§£ã€æ¨ç†ã€å†…å®¹æ€»ç»“å’Œç”Ÿæˆ**æ—¶è°ƒç”¨ã€‚
    *   **ä¼˜åŠ¿**: å°†å®è´µçš„LLMèµ„æºç”¨åœ¨â€œåˆ€åˆƒâ€ä¸Šï¼Œå»å®Œæˆå®ƒæœ€æ“…é•¿ã€æœ€é«˜ä»·å€¼çš„å·¥ä½œï¼Œè€Œä¸æ˜¯æ¶ˆè€—åœ¨ç®€å•çš„åˆ†ç±»åˆ¤æ–­ä¸Šã€‚

**`model_foundry` å°±æ˜¯æ‚¨çš„â€œå°è„‘â€é“¸é€ å·¥å‚ã€‚** å®ƒè®©æ‚¨çš„AIåº”ç”¨åœ¨ä¿æŒè½»é‡åŒ–å’Œä½æˆæœ¬çš„åŒæ—¶ï¼Œè·å¾—ä¼ä¸šçº§çš„**é€Ÿåº¦ã€å¯é æ€§ä¸æ™ºèƒ½**ã€‚

## âœ¨ ç‰¹æ€§

-   **è“å›¾é©±åŠ¨ (Blueprint-Driven):** åœ¨`blueprints/`ä¸‹å®šä¹‰æ–°çš„æ¨¡å‹â€œè“å›¾â€ï¼ˆå®ªæ³•+é…ç½®ï¼‰ï¼Œå³å¯è½»æ¾æ‰©å±•ï¼Œé“¸é€ å…¨æ–°æ¶æ„çš„æ¨¡å‹ã€‚
-   **ä¸€é”®å¼è‡ªåŠ¨åŒ–å¼•æ“:** ç”±`main.py`å’Œ`test.py`ç»Ÿä¸€è°ƒåº¦ï¼Œå‘Šåˆ«ç¹ççš„æ‰‹åŠ¨åˆ†æ­¥æ‰§è¡Œã€‚
-   **ç”Ÿäº§çº§æ¨¡å‹å¯¼å‡º:** æœ€ç»ˆäº§å‡ºç‰©æ˜¯è·¨å¹³å°ã€é«˜æ€§èƒ½çš„`.onnx`æ ¼å¼æ¨¡å‹ï¼Œä»¥åŠé€šè¿‡**Protocol Buffers (Protobuf)** åºåˆ—åŒ–çš„ã€ç±»å‹å®‰å…¨ä¸”ä¿è¯é¡ºåºçš„`.bin`é¢„å¤„ç†å™¨æ•°æ®ã€‚
-   **é—­ç¯éªŒè¯ä½“éªŒ:** æ¯ä¸ªè“å›¾éƒ½åŒ…å«ç‹¬ç«‹çš„äº¤äº’å¼æµ‹è¯•å™¨ï¼Œè®©æ‚¨èƒ½ç«‹åˆ»ä¸è‡ªå·±é“¸é€ çš„æ¨¡å‹å¯¹è¯ã€‚

---

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹

### 1. ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†æœ¬ä»“åº“
git clone https://github.com/your-username/model_foundry.git
cd model_foundry

# (æ¨è) åˆ›å»ºå¹¶æ¿€æ´»ä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒ
# python -m venv .venv && source .venv/bin/activate

# å®‰è£…æ‰€æœ‰å¿…éœ€çš„åŒ… (æˆ‘ä»¬ä½¿ç”¨uvï¼Œä½ ä¹Ÿå¯ä»¥ç”¨pip)
uv pip install -r requirements.txt
```

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º`.env`æ–‡ä»¶ï¼Œå¹¶å¡«å…¥æ‚¨çš„Gemini APIå¯†é’¥ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å¤šä¸ªä»¥é€—å·åˆ†éš”çš„å¯†é’¥æ¥åº”å¯¹é€Ÿç‡é™åˆ¶ï¼š
```env
GEMINI_API_KEYS=your_api_key_1,your_api_key_2
```

### 2. é“¸é€ æ‰€æœ‰é¢„ç½®æ¨¡å‹

åªéœ€ä¸¤æ¡å‘½ä»¤ï¼Œå³å¯ä»é›¶å¼€å§‹æ„å»ºå¹¶éªŒè¯ä»“åº“å†…é¢„ç½®çš„æ‰€æœ‰å¾®æ¨¡å‹ã€‚

```bash
# 1. é“¸é€ æ–‡æœ¬åˆ†ç±»æ¨¡å‹ (is_question, confirmation)
python main.py --blueprint text_classification

# 2. é“¸é€ å‘½åå®ä½“è¯†åˆ«æ¨¡å‹ (ner_core_entity)
python main.py --blueprint sequence_tagging_ner
```
> **æç¤º:** å¦‚æœ`datasets/raw`ä¸‹å·²å­˜åœ¨åŸå§‹æ•°æ®ï¼Œæµæ°´çº¿ä¼šè‡ªåŠ¨è·³è¿‡æ•°æ®ç”Ÿæˆé˜¶æ®µï¼Œä¸ºæ‚¨èŠ‚çœæ—¶é—´å’ŒAPIæˆæœ¬ã€‚

### 3. å”¤é†’å¹¶ä¸ä½ çš„æ¨¡å‹å¯¹è¯

æˆ‘ä»¬ä¸ºæ¯ä¸ªè“å›¾éƒ½æä¾›äº†ç‹¬ç«‹çš„â€œå”¤é†’å®éªŒå®¤â€ã€‚

```bash
# æµ‹è¯•æ–‡æœ¬åˆ†ç±»æ¨¡å‹
python test.py --blueprint text_classification

# æµ‹è¯•å‘½åå®ä½“è¯†åˆ«æ¨¡å‹
python test.py --blueprint sequence_tagging_ner
```

---

## ğŸ› ï¸ å¼€å‘è€…æŒ‡å—ï¼šå¦‚ä½•é“¸é€ ä¸€ä¸ªå…¨æ–°çš„æ¨¡å‹

æˆ‘ä»¬å°†ä»¥åˆ›å»ºä¸€ä¸ªâ€œ**æƒ…æ„Ÿåˆ†æåˆ†ç±»å™¨**â€ä¸ºä¾‹ï¼Œå±•ç¤ºé“¸é€ å‚çš„æ‰©å±•èƒ½åŠ›ã€‚

### ç¬¬1æ­¥: å®šä¹‰è“å›¾

åœ¨`blueprints/`ä¸‹åˆ›å»ºæ–°ç›®å½•`sentiment_analysis`ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä¸¤ä¸ªæ–‡ä»¶ï¼š

**`blueprints/sentiment_analysis/constitution.py`** (å®šä¹‰æ•°æ®ç”Ÿæˆè§„åˆ™)
```python
def SENTIMENT_ANALYSIS_CONSTITUTION(samples_per_request: int) -> str:
    # ... (æ­¤å¤„çœç•¥ï¼Œå†…å®¹ä¸ºå®šä¹‰ "Positive", "Negative", "Neutral" çš„Prompt)
```

**`blueprints/sentiment_analysis/config.py`** (å®šä¹‰ç”Ÿäº§çº¿é…ç½®)
```python
from pathlib import Path
# å¤ç”¨ç°æœ‰é…ç½®ï¼Œä¿æŒç®€æ´
from blueprints.text_classification.config import GENERATOR_CONFIG, REFINER_CONFIG, TRAINER_CONFIG

BASE_DIR = Path(__file__).resolve().parent.parent.parent
DATA_DIR = BASE_DIR / "datasets"
MODELS_DIR = BASE_DIR / "models"

TASKS = {
    "sentiment": {
        "constitution_func_name": "SENTIMENT_ANALYSIS_CONSTITUTION",
        "valid_labels": {"Positive", "Negative", "Neutral"},
        "expected_keys": {"text", "label"},
    }
}
```

### ç¬¬2æ­¥: é“¾æ¥è®­ç»ƒå™¨

æ‰“å¼€æ ¹ç›®å½•ä¸‹çš„ `main.py`ï¼Œè®©ä¸»æ§ç¨‹åºçŸ¥é“è¿™ä¸ªæ–°è“å›¾åº”è¯¥ä½¿ç”¨å“ªä¸ªè®­ç»ƒå™¨ã€‚ç”±äºæƒ…æ„Ÿåˆ†æä¹Ÿæ˜¯æ–‡æœ¬åˆ†ç±»ï¼Œæˆ‘ä»¬å¤ç”¨ç°æœ‰çš„`tfidf_classifier_trainer`ã€‚

**ä¿®æ”¹ `main.py`:**
```python
# ... åœ¨ main.py çš„è®­ç»ƒé˜¶æ®µé€»è¾‘ä¸­ ...
        # æ·»åŠ å¯¹æ–°è“å›¾çš„åˆ¤æ–­
        if args.blueprint in ["text_classification", "sentiment_analysis"]:
            tfidf_classifier_trainer.run(config_module)
        elif args.blueprint == "sequence_tagging_ner":
            bilstm_crf_trainer.run(config_module)
```

### ç¬¬3æ­¥: é“¸é€ ä¸æµ‹è¯•

```bash
# ä¸€é”®é“¸é€ ä½ çš„æ–°æ¨¡å‹
python main.py --blueprint sentiment_analysis

# åœ¨æµ‹è¯•å‰ï¼Œä¸ºæ–°è“å›¾åˆ›å»ºä¸“å±çš„ tester.py
# (å‚è€ƒ blueprints/text_classification/tester.py è¿›è¡Œåˆ›å»º)

# å”¤é†’ä½ çš„æ–°æ¨¡å‹
python test.py --blueprint sentiment_analysis
```

æœ¬é“¸é€ å‚çš„æ¨¡å—åŒ–è®¾è®¡ï¼Œæ—¨åœ¨è®©è¿™ç±»æ‰©å±•å˜å¾—è½»æ¾è€Œæ„‰å¿«ã€‚