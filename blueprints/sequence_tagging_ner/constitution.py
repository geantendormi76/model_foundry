# blueprints/sequence_tagging_ner/constitution.py
# 编码: UTF-8

def NER_CORE_ENTITY_CONSTITUTION(samples_per_request: int) -> str:
    """
    为 NER_CoreEntity (核心实体识别) 模型生成数据的“宪法”。(V2 - 强化版)
    该模型的目标是从用户的自然语言指令中，精准地识别出核心实体，
    如项目名称、人名、特定事件等，用于后续的精确召回。
    """
    return f"""
你是一位为命名实体识别(NER)模型生成高质量、多样化训练数据的专家。
你的核心任务是为个人AI助理创建多样化的中文句子，并对每个词进行精确的实体标注。

**核心实体类型定义:**
1.  `PROJ` (Project): 项目、产品、计划或内部代码的正式名称。
    - 示例: "泰坦计划", "猎鹰重型火箭", "天眼查", "zhzAI大脑项目"
2.  `PERS` (Person): 人名，可以是中文、英文或昵称。
    - 示例: "张三", "埃隆·马斯克", "李部长", "小王"
3.  `EVT` (Event): 具有特定名称的、可识别的事件或会议。
    - 示例: "双十一购物节", "阿波罗登月计划", "2025年Q3复盘会", "每周五的站会"

**输出格式要求 (严格遵守):**
你必须输出一个严格合法的JSON数组。数组中的每个对象代表一个训练样本，包含两个键：
1.  `"tokens"`: 一个由字符串组成的列表，代表**单字**分词后的句子。
2.  `"tags"`: 一个与 `tokens` 列表等长的标签列表，标签必须是 `B-PROJ`, `I-PROJ`, `B-PERS`, `I-PERS`, `B-EVT`, `I-EVT`, `O` 之一。

**BIO标注法黄金规则:**
- 实体的第一个字标记为 `B-` (Beginning)。
- 实体内的后续字标记为 `I-` (Inside)。
- 非实体字标记为 `O` (Outside)。
- `I-` 标签前必须是对应的 `B-` 或 `I-` 标签。

---
**高质量示例:**

<示例1: 包含多种实体>
"关于 泰坦计划 的最新进展，去问一下 张三 。"
{{
  "tokens": ["关", "于", "泰", "坦", "计", "划", "的", "最", "新", "进", "展", "，", "去", "问", "一", "下", "张", "三", "。"],
  "tags": ["O", "O", "B-PROJ", "I-PROJ", "I-PROJ", "I-PROJ", "O", "O", "O", "O", "O", "O", "O", "O", "O", "O", "B-PERS", "I-PERS", "O"]
}}

<示例2: 包含事件>
"提醒我参加 2025年Q3复盘会 。"
{{
  "tokens": ["提", "醒", "我", "参", "加", "2", "0", "2", "5", "年", "Q", "3", "复", "盘", "会", "。"],
  "tags": ["O", "O", "O", "O", "O", "B-EVT", "I-EVT", "I-EVT", "I-EVT", "I-EVT", "I-EVT", "I-EVT", "I-EVT", "I-EVT", "I-EVT", "O"]
}}

<示例3: 无任何实体 (非常重要!)>
"今天天气真不错啊。"
{{
  "tokens": ["今", "天", "天", "气", "真", "不", "错", "啊", "。"],
  "tags": ["O", "O", "O", "O", "O", "O", "O", "O", "O"]
}}
---

**核心数据生成指令 (必须严格执行):**

1.  **精确生成 {samples_per_request} 条**独一无二的、符合上述格式的示例。
2.  **最终输出只能是JSON数组**，绝对不要包含任何解释、Markdown标记或其他文字。
3.  **场景多样化**: 生成的句子必须覆盖指令句("删除...")、疑问句("...是谁负责的?")和陈述句("...的进展顺利。")。
4.  **实体多样化**: 确保所有实体类型(`PROJ`, `PERS`, `EVT`)都出现，并有合理的分布。
5.  **包含无实体样本**: **至关重要的一点**，数据中必须包含**大量(约20-30%)不含任何实体的日常对话或简单指令**，其 `tags` 列表应全为 `O`。这是为了教会模型何时不应该进行标注。
6.  **测试边界**: 创建一些测试实体边界的句子。例如: "'泰坦计划'的负责人" vs "'泰坦计划第一阶段'的负责人"。
7.  **句子长度变化**: 生成的句子长度应从5个字到50个字不等，以增强模型鲁棒性。
"""